## Информация о проекте

Данный проект разрабатывался с использованием CMake под WSL2 (Ubuntu). Он использует пакетный
менеджер *<span style="color:#03dbfc">conan</span>*.

Поэтому для установки пакетов следует выполнить готовый скрипт `install_pkg.sh`:

```shell
$ ./install_pkg.sh
```

##### Список участников команды

Vasiliy Nesterovich

##### Имя тимлида (по желанию)

Vasiliy Nesterovich

##### Описание выбранной идеи решения

- Хранить даннные решено в JSON — для простоты и большей переносимости. С этой целью установлена
  библиотека *<span style="color:#03dbfc">nlohmann/json</span>*.
- Пароли, разумеется, лучше хешировать. Используется bcrypt из *<span style="color:#03dbfc">crypto++</span>*.

##### Описание пользовательских типов и функций в проекте

**Модели:** _Message_, _User_. Описывают сообщения и пользователей соответственно.

**Сервисы:** ChatService, UserService. Отвечают за получение, преобразование, добавление и хранение сообщений и
пользователей соответственно.

`Методы ChatService`

```c++
// Инициализация при создании класса. Создаёт пустой файл данных, если его ещё нет.
void initialize();

// Считать из файла и получить набор сообщений.
vector<Message> get_messages();

// Получить отформатированные сообщения в переписке данного пользователя.
vector<string> get_formatted_messages(const User *user);

// Отправить сообщение (записать в файл).
void post_message(Message &message);
```

`Методы UserService`

```c++
// Аналогично предыдущему сервису.
void initialize();

// Создать нового пользователя (записать в файл).
User add_user(User &user);

// Получить объект пользователя по логину.
User get_user(string &login);

// Получить набор всех пользователей системы.
vector<User> get_users();

// Проверить, есть ли в системе пользователь с данным логином.
bool find_user(string &login);
```

**Контроллеры:** весь функционал данного чата управляется _ChatController_.

`Методы ChatController`

```c++
// Выбор начального действия: вход, регистрация, выход.
void initialize();

// Выполнить регистрацию.
void do_signup();

// Выполнить вход.
void do_login();

// Открыть чат (после успешного входа/регистрации).
void enter_chat(const User &user);

// Отобразить сообщения для данного пользователя.
void show_messages();

// Считать ввод.
void do_input();

// Отобразить подсказки.
static void show_help();

// Считать начальное действие.
static int get_action();

// Сгенерировать хеш для пароля.
static string gen_password(const string &password);
```

Также в коде присутствует хелпер _strutil_ для обработки строк.

`Функции strutil`

```c++
// Обрезать все пробелы слева.
std::string ltrim(const std::string &s)

// Обрезать все пробелы справа.
std::string rtrim(const std::string &s)

// Обрезать все пробелы и слева, и справа.
std::string trim(const std::string &s)
```

##### Пояснение, как были распределены задачи в команде (кто какую часть проекта реализовывал)

Всё сделано в одиночку